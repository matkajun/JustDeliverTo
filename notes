# JustDeliverTo

Congratulations, you just started your new startup named "JustDeliverTo".
Your website is under construction, but how about a small "coming soon" page?
So here is what we need to do:

1. Create a basic "coming soon" page with the company's logo (1 html file, 1 image file). Keep it simple
2. Put the files in a new repo in Github. Make it public.
3. Create a new VM on your computer and install Jenkins on it
4. Create a new Jenkins job: build_website. The job gets the branch name as a param. The task should:
  * Get the sources from github
  * Add "build.json" file where the content is {"build_job_id": 123, "commit": "the-git-commit-id"}
  * Then it will zip all 3 files and name it build_website_<build job id>.zip (e.g build_website_18.zip)
  * The zip should be uploaded to a cloud storage of your choice (e.g s3, Google Drive, etc)
5. Create a new virtual machine that runs a website on nginx and serves static files.
  * The website should support HTTPS only with a self-signed certificate
  * Make sure that the website you created appears well
6. Create a task "deploy_website" that gets a build_website_id as a parameter
  * The task should download the zip of the specified build number and deploy the files on the website vm
  * Use your browser to check that the website actually updated after the deployment
  

1. יצרתי דך HTML בסיסי והגשתי אותו דרך flask
2.יצרתי משתמ ב-gitghub, ונתתי הרשאות בעזרת SSH-KEY למשתמש ולשרת ג'נקינס שיוכלו לתקשר בניהם
3. יצרתי 2 תהליכי פייפלין בג'נקינס
 א. מתחיל לרוץ ע"י פרמטר שמייצג את הבראנצ' הנדרש, משם הוא ניגש לקובץ build.json והוא יודע איזה גירסא לבנות, בדוגמא שלנו 123
 לאחר מכן אורז את כל הקבצים הנדרשים לקובץ ZIP ומעלה לS3. 
 ב. מתחיל לרוץ ע"י פרטמר שמייצג את ה-build job id, בדוגמא שלנו 123, ניגש לS3 מחפש את id המבוקש מוריד אותו ולאחר מכן מחלץ, לאחר החילוץ נרים 2 סרוויסים אחד של האפלקציה ואחד של שרת  הngnix. 
 
 
שרת ה-NGNIX רץ על פורט 443 בHTTPS ואם ננסה לגשת אילו בפורט 80 הברירת מחדל של NGNIX נקבל התראה והוא ישלח אותנו אוטמטית ל-443, כמו כן הוספתי הגשה של קבצי STATIC FILES למרות שאין לנו כאן DB אז זה לא כזה משנה, החשיבה הייתה תמיד לחשוב על השלב הבא. 

שרת הג'נקינס גם יושב על קונטינר, ודרכו אתה מעלה ומוריד את האפלקציה, על שרת הג'נקינס התקנתי plugin ל- aws credentials כדי לעבוד עם S3 בצורה בטוחה. 

קישור לGITHUB: 
https://github.com/matkajun/JustDeliverTo

ג'ינקיס רץ על PORT 8080
http://localhost:8080/

User: admim
password: 12345678

שלבים. 
1. להרים את השרת של הג'נקניס: docker-compse up --buld מהתיקיה הראשית(JustDeliverT)
2. להריץ build ל-build_website 
3. להריץ build ל-deploy_website, והאתר באוויר
4. נכנסים https://localhost:443
